"use strict";

/**
 * File navigation.js.
 *
 * Handles toggling the navigation menu for small screens and enables TAB key
 * navigation support for dropdown menus.
 */
document.addEventListener('DOMContentLoaded', function (e) {
  // Manage menu buttons
  var toggles = document.querySelectorAll('.menu-overlay-toggle');
  var menuOverlay = document.querySelector('.main-menu-overlay');

  if (toggles && menuOverlay) {
    toggles.forEach(function (toggle) {
      toggle.addEventListener('click', function (e) {
        menuOverlay.classList.toggle('open');
        toggles.forEach(function (toggle) {
          toggle.setAttribute('aria-expanded', menuOverlay.classList.contains('open'));
        });
      });
    });
  } // Toggle 'focus' class on <li> elements.


  var links = menuOverlay.querySelectorAll('a');

  var toggleFocus = function toggleFocus(e) {
    var parent = e.target.parentNode;

    if (parent.classList.contains('menu-item')) {
      parent.classList.toggle('focus');
    }
  };

  links.forEach(function (link) {
    link.addEventListener('focus', toggleFocus, true);
    link.addEventListener('touchstart', toggleFocus, true);
    link.addEventListener('blur', function (e) {
      links.forEach(function (link) {
        link.parentNode.classList.remove('focus');
      });
    }, true);
  });
});
